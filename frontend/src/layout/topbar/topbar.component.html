<mat-toolbar class="topbar">
  <div class="left">
    <!-- Mobile Hamburger Menu -->
    <button mat-icon-button class="sidebar-toggle-mobile" (click)="toggleSidebar()" aria-label="Toggle sidebar">
      <mat-icon>menu</mat-icon>
    </button>
  </div>
  <div class="right">
    <!-- Always visible: Theme toggle -->
    <button mat-icon-button aria-label="theme toggle" (click)="toggleTheme()">
      <mat-icon>{{ isDark ? 'light_mode' : 'dark_mode' }}</mat-icon>
    </button>
    <!-- User info with dropdown -->
    <div class="user" 
         (click)="toggleUserMenu()" 
         (keyup.enter)="toggleUserMenu()" 
         tabindex="0" 
         role="button">
      <div class="avatar"></div>
      <div class="info">
        <div class="name">{{ displayName }}</div>
        <div class="role" *ngIf="role">{{ role }}</div>
        <div class="company" *ngIf="companyName">{{ companyName }}</div>
      </div>
      <mat-icon class="dropdown-icon">{{ showMenu ? 'expand_less' : 'expand_more' }}</mat-icon>
      <div class="user-menu" *ngIf="showMenu">
        <button mat-button routerLink="/admin" *ngIf="canSeeAdmin" (click)="showMenu = false">
          <mat-icon>admin_panel_settings</mat-icon>
          Administration
        </button>
        <button mat-button color="primary" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Log out
        </button>
      </div>
    </div>
  </div>
</mat-toolbar>
