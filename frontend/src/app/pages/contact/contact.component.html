<div class="page contact-page">
  <h1>Contact</h1>

  <!-- Sekcia filtra -->
  <div class="filter-section">
    <div class="filter-row">
      <input type="text" [(ngModel)]="filterText" (input)="onFilterChange()" placeholder="Search by name or company..."
        class="filter-input" />
      <select [(ngModel)]="filterRole" (change)="onFilterChange()" class="filter-select">
        <option value="">All Roles</option>
        <option value="Employee">Employee</option>
        <option value="Employer">Employer</option>
        <option value="Admin">Admin</option>
      </select>
      <select [(ngModel)]="filterCompany" (change)="onFilterChange()" class="filter-select">
        <option value="">All Companies</option>
        <option *ngFor="let company of companies" [value]="company.name">
          {{ company.name }}
        </option>
      </select>
      <button type="button" class="clear-filters" (click)="clearFilters()">
        Clear
      </button>
    </div>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
    <button type="button" (click)="loadUsers()">Try again</button>
  </div>

  <div *ngIf="loading" class="loading">
    Loading contacts...
  </div>

  <div *ngIf="!loading && !error" class="contact-list">
    <div class="contact-item" *ngFor="let c of contacts">
      <div class="contact-left">
        <mat-icon class="avatar-icon">person</mat-icon>
        <div class="text">
          <div class="name">{{ c.name }}</div>
          <div class="role">{{ c.role }}</div>
          <div class="company">{{ c.company }}</div>
        </div>
      </div>
      <a [href]="'mailto:' + c.email + '?subject=Message from Timora&body=Hello ' + c.name + ',%0D%0A%0D%0A'"
        class="send-btn" [title]="'Send email to ' + c.name">
        <mat-icon fontIcon="send"></mat-icon>
      </a>
    </div>
  </div>

  <div *ngIf="!loading && !error && contacts.length === 0" class="empty-state">
    <mat-icon>people</mat-icon>
    <p>No contacts found.</p>
  </div>
</div>